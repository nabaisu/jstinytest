<script src="../simpletest.js"></script>
<script src="adder.js"></script>
<script>
  function pop(array) {
    //create a new array
    //populate the new array
    var length = array.length
    var newArray = [];
    var result = array[length-1]
    if (array.length === 0){
      return undefined;
    } else {
        for (i=0; i < length - 1; i++){
          newArray[i] = array[i];
        }
    }
    //update the value of the old array
    array = newArray;
    return result;
  }

  var completeArray = [,[1,[3,4]], 1,{amigo : 'amigo'} , , 1, 'a', 0, 4];
  //var length = completeArray.length;
  tests({
    "it should return the last item that was erased": function() {
      var novoArray = completeArray.slice();
      var lastIndice = completeArray[completeArray.length-1];
      var indice = pop(completeArray);
      eq(lastIndice,indice)
    },
    "it should update the given array": function() {
      var novoArray = completeArray.slice();
      pop(completeArray);
      console.log(completeArray);
      novoArray.pop();
      eq(JSON.stringify(completeArray),JSON.stringify(novoArray));
    },
    "it should be able to be able to be called & applied": function() {
      var myFish = {0:'angel', 1:'clown', 2:'mandarin', 3:'sturgeon', length: 4};
      var popped = pop.call(myFish);
      console.log(JSON.stringify({0: "angel", 1: "clown", 2: "mandarin", length: 3}));
      eq(JSON.stringify({0: "angel", 1: "clown", 2: "mandarin", length: 3}), JSON.stringify(myFish))
      eq('sturgeon',popped);
    },
    "it should return undefined if array is empty": function() {
      eq(undefined, pop([]))
/*    },
    "it should return the before last item if hole in the end": function() {
      
*/    }
  });
</script>
